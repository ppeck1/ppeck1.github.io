<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paul Peck, RN ‚Äì E-MyR Interactive Resume</title>
    
    <!-- SEO & Social Meta Tags -->
    <meta name="description" content="Interactive EMR-style resume of Paul Peck, RN - blending clinical expertise with informatics and design.">
    <meta property="og:title" content="Paul Peck, RN - E-MyR Interactive Resume">
    <meta property="og:description" content="Interactive EMR-style resume of Paul Peck, RN - blending clinical expertise with informatics and design.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ppeck.me/">
    <meta property="og:image" content="assets/og/preview.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Paul Peck, RN - E-MyR Interactive Resume">
    <meta name="twitter:description" content="Interactive EMR-style resume of Paul Peck, RN - blending clinical expertise with informatics and design.">
    <meta name="twitter:image" content="assets/og/preview.png">
    
    <!-- Favicon & Manifest -->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
    <link rel="icon" type="image/png" href="assets/favicon.png">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    <link rel="manifest" href="assets/manifest.webmanifest">
    <meta name="theme-color" content="#009688">
    
    <!-- Prefetch Resume -->
    <link rel="prefetch" href="assets/resume/pp_Paul_Peck_Resume_11.20.25.pdf" as="document">
    
    <style>
        /* CSS Reset & Base */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        :root {
            --accent-primary: #009688;
            --accent-secondary: #C46B3B;
            --bg-dark: #1B1B1B;
            --bg-light: #F5F5F3;
            --text-light: #1B1B1B;
            --text-dark: #EAE4D3;
            --link-color: #00BFA5;
            --transition-speed: 0.3s;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            background: var(--bg-light);
            color: var(--text-light);
            transition: background var(--transition-speed), color var(--transition-speed);
        }

        body.dark-theme {
            background: var(--bg-dark);
            color: var(--text-dark);
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Boot Screen */
        .boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 99999;
            transition: opacity 0.5s ease-out;
        }

        .boot-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .boot-logo {
            font-size: 4rem;
            font-weight: 700;
            color: var(--accent-primary);
            margin-bottom: 10px;
            animation: logoPulse 2.2s ease-in-out infinite;
        }

        .boot-subtitle {
            font-size: 1.2rem;
            color: var(--text-dark);
            margin-bottom: 40px;
            letter-spacing: 2px;
        }

        .boot-heartbeat {
            width: 300px;
            height: 60px;
            margin: 0 auto 30px;
            display: block;
        }

        .heartbeat-line {
            stroke: var(--accent-primary);
            stroke-width: 2;
            fill: none;
            stroke-linecap: round;
            stroke-dasharray: 300;
            stroke-dashoffset: 300;
            animation: drawHeartbeat 2.2s ease-out forwards;
        }
        .heartbeat-glow {
            stroke: var(--accent-primary);
            stroke-width: 4;
            fill: none;
            opacity: 0.4;
            filter: blur(2px);
            stroke-linecap: round;
            stroke-dasharray: 300;
            stroke-dashoffset: 300;
            animation: drawHeartbeat 2.2s ease-out forwards, heartbeatGlowFade 2.2s ease-out forwards;
        }

        @keyframes heartbeatGlowFade {
            0%   { opacity: 0.4; }
            70%  { opacity: 0.4; }
            100% { opacity: 0; }
        }

        .boot-status {
            color: var(--text-dark);
            font-size: 0.9rem;
            opacity: 0.7;
        }

        @keyframes logoPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes drawHeartbeat {
            to { stroke-dashoffset: 0; }
        }

        /* Single static pop on boot screen */
        @keyframes staticPop {
            0% {
                filter: brightness(1);
                transform: scale(1);
            }
            10% {
                filter: brightness(2);
                transform: scale(1.02);
            }
            25% {
                filter: brightness(0.2);
            }
            45% {
                filter: brightness(1.2);
                transform: scale(1.01);
            }
            100% {
                filter: brightness(1);
                transform: scale(1);
            }
        }

        .boot-screen.static-pop {
            animation: staticPop 0.3s ease-out;
        }

        /* Welcome Modal */
        .welcome-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.3s ease-out;
        }

        .welcome-modal.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .welcome-content {
            background: var(--bg-light);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            max-width: 500px;
            text-align: center;
        }

        .dark-theme .welcome-content {
            background: var(--bg-dark);
        }

        .welcome-title {
            font-size: 2rem;
            color: var(--accent-primary);
            margin-bottom: 10px;
        }

        .welcome-subtitle {
            font-size: 1.3rem;
            color: var(--accent-secondary);
            margin-bottom: 20px;
        }

        .welcome-description {
            font-size: 1rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .welcome-button {
            background: var(--accent-primary);
            color: white;
            border: none;
            padding: 12px 30px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 4px;
            cursor: pointer;
            transition: background var(--transition-speed);
            margin-bottom: 20px;
        }

        .welcome-button:hover,
        .welcome-button:focus {
            background: var(--accent-secondary);
        }

        .skip-intro-label {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .skip-intro-label input {
            cursor: pointer;
        }

        /* Main Layout */
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--accent-primary);
            color: white;
            border-radius: 8px 8px 0 0;
            margin-bottom: 2px;
        }

        .app-title {
            font-size: 1.8rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .theme-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background var(--transition-speed);
        }

        .theme-toggle:hover,
        .theme-toggle:focus {
            background: rgba(255, 255, 255, 0.3);
            outline: 2px solid white;
            outline-offset: 2px;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            background: var(--bg-light);
            border-bottom: 3px solid var(--accent-primary);
            overflow-x: auto;
            gap: 4px;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .nav-tabs::-webkit-scrollbar {
            display: none;
        }

        .dark-theme .nav-tabs {
            background: var(--bg-dark);
        }

        .nav-tab {
            flex: 1 1 0;
            min-width: 120px;
            padding: 15px 20px;
            background: rgba(0, 150, 136, 0.1);
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            color: inherit;
            transition: all var(--transition-speed);
            position: relative;
            user-select: none;
            white-space: nowrap;
            scroll-snap-align: start;
        }

        .nav-tab:hover,
        .nav-tab:focus {
            background: rgba(0, 150, 136, 0.2);
            outline: none;
        }

        .nav-tab.active {
            background: var(--accent-primary);
            color: white;
        }

        .nav-tab.active::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--accent-secondary);
        }

        /* Content Area */
        .content-area {
            flex: 1;
            background: var(--bg-light);
            padding: 30px;
            border-radius: 0 0 8px 8px;
            margin-bottom: 80px;
            min-height: 500px;
        }

        .dark-theme .content-area {
            background: var(--bg-dark);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Typography */
        h2 {
            color: var(--accent-primary);
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 2px solid var(--accent-secondary);
            padding-bottom: 10px;
        }

        h3 {
            color: var(--accent-secondary);
            margin: 25px 0 15px;
            font-size: 1.3rem;
        }

        p {
            margin-bottom: 15px;
            line-height: 1.8;
        }

        a {
            color: var(--link-color);
            text-decoration: none;
            transition: color var(--transition-speed);
        }

        a:hover,
        a:focus {
            color: var(--accent-secondary);
            text-decoration: underline;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        /* Demographics Section */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .info-item {
            padding: 15px;
            background: rgba(0, 150, 136, 0.05);
            border-left: 3px solid var(--accent-primary);
            border-radius: 4px;
        }

        .dark-theme .info-item {
            background: rgba(0, 150, 136, 0.1);
        }

        .info-label {
            font-weight: 600;
            color: var(--accent-primary);
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 0.95rem;
        }

        .links-list {
            list-style: none;
            margin-left: 0;
        }

        .links-list li {
            margin-bottom: 10px;
        }

        /* Experience Section */
        .experience-item {
            margin-bottom: 20px;
            border: 1px solid rgba(0, 150, 136, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .job-header {
            margin-bottom: 15px;
        }

        .job-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-secondary);
            margin-bottom: 5px;
        }

        .job-org {
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 3px;
        }

        .job-dates {
            font-size: 0.9rem;
            font-style: italic;
            color: #666;
        }

        .dark-theme .job-dates {
            color: #aaa;
        }

        .job-bullets {
            list-style: none;
            margin-left: 0;
        }

        .job-bullets li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 10px;
        }

        .job-bullets li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: var(--accent-primary);
            font-weight: bold;
        }

        /* Skills Section */
        .skills-section {
            margin-bottom: 20px;
            border: 1px solid rgba(0, 150, 136, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .skills-section h3 {
            margin: 0;
        }

        .skills-section ul {
            list-style: none;
            margin-left: 0;
        }

        .skills-section li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 12px;
            line-height: 1.7;
        }

        .skills-section li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--accent-primary);
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Blog Section */
        .sticky-note {
            background: #fff8c4;
            border-left: 4px solid var(--accent-secondary);
            padding: 15px 18px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .dark-theme .sticky-note {
            background: #5b532f;
            color: #f9f5dd;
        }

        .blog-body {
            margin-top: 10px;
        }

        /* Documents Section */
        .document-item {
            margin-bottom: 20px;
            border: 1px solid rgba(0, 150, 136, 0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .collapsible-header {
            padding: 15px 20px;
            background: rgba(0, 150, 136, 0.05);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background var(--transition-speed);
            user-select: none;
        }

        .collapsible-header:hover {
            background: rgba(0, 150, 136, 0.1);
        }

        .dark-theme .collapsible-header {
            background: rgba(0, 150, 136, 0.1);
        }

        .dark-theme .collapsible-header:hover {
            background: rgba(0, 150, 136, 0.15);
        }

        .collapsible-header.expanded .collapsible-icon {
            transform: rotate(90deg);
        }

        .collapsible-icon {
            transition: transform var(--transition-speed);
            color: var(--accent-primary);
            font-size: 1.2rem;
        }

        .doc-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-speed) ease-out;
            padding: 0 20px;
        }

        .collapsible-content.expanded {
            max-height: 1000px;
            padding: 20px;
            transition: max-height var(--transition-speed) ease-in;
        }

        .doc-meta {
            color: #666;
            font-size: 0.95rem;
            margin-bottom: 10px;
        }

        .dark-theme .doc-meta {
            color: #aaa;
        }

        .doc-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .doc-link {
            display: inline-block;
            padding: 8px 16px;
            background: var(--accent-primary);
            color: white;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: background var(--transition-speed);
        }

        .doc-link:hover,
        .doc-link:focus {
            background: var(--accent-secondary);
            text-decoration: none;
        }

        /* Dock */
        .dock {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--accent-primary);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            transition: transform var(--transition-speed);
            z-index: 1000;
        }

        .dock.scrolled {
            transform: translateY(0);
        }

        .dock-btn {
            background: white;
            color: var(--accent-primary);
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all var(--transition-speed);
            text-decoration: none;
            display: inline-block;
        }

        .dock-btn:hover,
        .dock-btn:focus {
            background: var(--accent-secondary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        /* Loading State */
        #loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
            color: var(--accent-primary);
        }

        /* Print Styles */
        @media print {
            body {
                background: white;
                color: black;
            }

            .app-header,
            .nav-tabs,
            .dock,
            .theme-toggle,
            .boot-screen,
            .welcome-modal {
                display: none;
            }

            .content-area {
                padding: 0;
                margin: 0;
            }

            .tab-content {
                display: block !important;
                page-break-inside: avoid;
            }

            h2 {
                page-break-after: avoid;
            }

            .experience-item,
            .document-item {
                page-break-inside: avoid;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .app-container {
                padding: 10px;
            }

            .app-header {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .app-title {
                font-size: 1.4rem;
            }

            .content-area {
                padding: 20px;
                margin-bottom: 80px;
            }

           .nav-tabs {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .nav-tab {
                flex: 0 0 auto;
                min-width: 120px;
                font-size: 0.9rem;
                padding: 12px 15px;
                white-space: nowrap;
            }

            .dock {
                flex-wrap: wrap;
                gap: 10px;
            }

            .dock-btn {
                font-size: 0.85rem;
                padding: 8px 15px;
            }

            .info-grid {
                grid-template-columns: 1fr;
            }

            .boot-logo {
                font-size: 3rem;
            }

            .boot-subtitle {
                font-size: 1rem;
            }

            .welcome-content {
                padding: 30px 20px;
                margin: 0 20px;
            }

            .welcome-title {
                font-size: 1.6rem;
            }

            .welcome-subtitle {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="boot-screen" id="bootScreen">
        <div class="boot-logo">E-MyR</div>
        <div class="boot-subtitle">Electronic Medical Record System</div>
        <svg class="boot-heartbeat" viewBox="0 0 300 60" xmlns="http://www.w3.org/2000/svg">
            <!-- Main heartbeat line -->
            <path
                class="heartbeat-line"
                d="M10 30 H80 L90 25 L100 30 H130 L140 35 L150 10 L160 45 L170 30 H200 L215 20 L230 30 H290"
            />
            <!-- Glow trace on top of the same path -->
            <path
                class="heartbeat-glow"
                d="M10 30 H80 L90 25 L100 30 H130 L140 35 L150 10 L160 45 L170 30 H200 L215 20 L230 30 H290"
            />
        </svg>
        <div class="boot-status">Initializing system...</div>
    </div>

    <div class="welcome-modal hidden" id="welcomeModal">
        <div class="welcome-content">
            <h1 class="welcome-title">Welcome to E-MyR</h1>
            <h2 class="welcome-subtitle">Paul Peck, RN</h2>
            <p class="welcome-description">Enjoy my interactive EMR styled resume.</p>
            <button class="welcome-button" id="enterChartBtn">Enter Chart ‚Üí</button>
            <label class="skip-intro-label">
                <input type="checkbox" id="skipIntroCheckbox">
                <span>Don't show this again</span>
            </label>
        </div>
    </div>

    <div class="app-container">
        <header class="app-header">
            <h1 class="app-title">E-MyR ‚Äì Electronic Medical Record</h1>
            <button id="themeToggle" class="theme-toggle" aria-label="Toggle theme">
                <span id="themeIcon">üåô</span>
                <span id="themeText">Dark</span>
            </button>
        </header>

        <nav class="nav-tabs" role="tablist">
            <button class="nav-tab active" data-tab="demographics" role="tab" aria-selected="true">Demographics</button>
            <button class="nav-tab" data-tab="history" role="tab" aria-selected="false">History</button>
            <button class="nav-tab" data-tab="meds" role="tab" aria-selected="false">Meds</button>
            <button class="nav-tab" data-tab="labs" role="tab" aria-selected="false">Labs</button>
            <button class="nav-tab" data-tab="notes" role="tab" aria-selected="false">Notes</button>
            <button class="nav-tab" data-tab="documents" role="tab" aria-selected="false">Documents</button>
        </nav>

        <main class="content-area">
            <div id="loading">Loading patient data...</div>
            
            <div id="tab-demographics" class="tab-content" role="tabpanel"></div>
            <div id="tab-history" class="tab-content" role="tabpanel"></div>
            <div id="tab-meds" class="tab-content" role="tabpanel"></div>
            <div id="tab-labs" class="tab-content" role="tabpanel"></div>
            <div id="tab-notes" class="tab-content" role="tabpanel"></div>
            <div id="tab-documents" class="tab-content" role="tabpanel"></div>
        </main>

        <div class="dock">
            <button id="homeBtn" class="dock-btn">üè† Home</button>
            <a id="resumeBtn" class="dock-btn" href="#" target="_blank" rel="noopener">üìÑ Download Resume</a>
            <button id="restartIntroBtn" class="dock-btn">üîÑ Restart Intro</button>
            <a id="contactBtn" class="dock-btn" href="/cdn-cgi/l/email-protection#7f">‚úâÔ∏è Contact</a>
        </div>
        <audio id="bootStaticAudio" src="assets/audio/boot-static.mp3" preload="auto"></audio>
        <audio id="ekgBeepAudio" src="assets/audio/ekg-beep.mp3" preload="auto"></audio>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // Resume Data (embedded JSON) - Updated with work experience from ppeck_work_experience_website.json
        const resumeData = {
            "version": "1.2",
            "project": "ppeck.me ‚Äì Interactive Resume",
            "identity": {
                "name": "Paul Peck, RN",
                "title": "Clinical Informatics & Documentation Specialist",
                "location": "Orlando, FL",
                "public_email": "paultpeck@gmail.com",
                "links": {
                    "linkedin": "https://www.linkedin.com/in/paul-peck-759737211/",
                    "github": "https://github.com/ppeck1",
                    "shop": "https://sinternetcult.com/",
                    "studio": "https://bigpeckturestudio.com/"
                }
            },
            "branding": {
                "tone": "professional, personal, interdisciplinary",
                "palette": {
                    "accent_primary": "#009688",
                    "accent_secondary": "#C46B3B",
                    "background_dark": "#1B1B1B",
                    "background_light": "#F5F5F3",
                    "text_light": "#1B1B1B",
                    "text_dark": "#EAE4D3",
                    "link_color": "#00BFA5"
                }
            },
            "resume": {
                "summary": "Registered Nurse with 15+ years across emergency care, pediatrics, case management, telehealth, and high-volume remote triage. Over that time I have drifted from 'just doing the work' into designing the systems around it - building Epic SmartPhrases/SmartLists, workflow guides, and peer resources that make documentation faster and more consistent. I'm now focused on roles where that mix of clinical experience and systems thinking matters most: utilization review, clinical documentation, and nursing informatics / clinical technology implementation.",
                "work_experience_sections": [
                    {
                        "id": "embedded_systems",
                        "title": "Embedded Systems, Automation, and Real-World System Design",
                        "date_range": "2012-Present, evolving across domains",
                        "overview": [
                            "Most recently, developed and prototyped embedded hardware and automation systems integrating microcontrollers, sensor inputs, fail-safe logic, state management, and triggered actions.",
                            "Designed resilience-focused behavior models for reliable operation under disruption, including controlled hardware-software communication such as USB HID and BLE, real-time rendering, tamper-handling, and safe default behaviors.",
                            "Earlier phases of this work focused on applied systems thinking across clinical, environmental, and biological contexts. These experiences naturally evolved into the technical integrations used in embedded and automation projects today.",
                            "Engineered biological system prototypes including hydroponics, aquaponics, nutrient-flow control, and regenerative agriculture environments. Applied feedback-loop and control-system concepts that later informed the embedded systems approach.",
                            "Completed applied research on climate-resilient horticulture involving Bidens alba heat tolerance and Brassica trait development.",
                            "Built a complete e-commerce ecosystem from the ground up, including product development, branding, UX optimization, automated content pipelines using n8n, Docker, and local LLMs, as well as Shopify and Etsy integrations, marketing systems, and AI-assisted creative workflows.",
                            "Supported all creative output with original photography, macro videography, illustration, and multimedia production."
                        ],
                        "subsections": [
                            {
                                "heading": "Embedded Hardware and Automation",
                                "bullets": [
                                    "Microcontrollers including RP2040, CircuitPython, and Arduino platforms.",
                                    "Sensor integration, input handling, and hardware state management.",
                                    "Fail-safe logic design focused on safe defaults and predictable failure behavior.",
                                    "Triggered actions driven by real-time sensor and state data."
                                ]
                            },
                            {
                                "heading": "Behavior Models and Communication",
                                "bullets": [
                                    "USB HID communication for presence and control signals.",
                                    "BLE communication for wireless interaction and device presence.",
                                    "Real-time display rendering supporting responsive visual feedback.",
                                    "Tamper-handling and graceful degradation under disruption."
                                ]
                            },
                            {
                                "heading": "Biological and Environmental Systems Engineering",
                                "bullets": [
                                    "Hydroponic and aquaponic system design and prototyping.",
                                    "Nutrient-flow control and monitoring for stable closed-loop systems.",
                                    "Regenerative agriculture experiments and climate-resilient horticulture research.",
                                    "Applied studies involving Bidens alba and Brassica cultivars."
                                ]
                            },
                            {
                                "heading": "E-Commerce Systems and Creative Workflows",
                                "bullets": [
                                    "End-to-end Shopify and Etsy storefront design and integration.",
                                    "Automated publishing and marketing pipelines using n8n, Docker, and local LLM tools.",
                                    "Branding, UX optimization, and iterative design for customer experience.",
                                    "Original photography, macro videography, and digital illustration to support product and brand visuals."
                                ]
                            }
                        ]
                    },
                    {
                        "id": "clinical_workflow",
                        "title": "Clinical Workflow Engineering and Digital Systems Optimization",
                        "date_range": "2015-Present",
                        "overview": [
                            "Optimized digital documentation workflows across multiple clinical environments with a focus on accuracy, throughput, and reducing cognitive load for front-line users.",
                            "Designed SmartPhrase and SmartList libraries that support remote care teams and telehealth environments.",
                            "Applied quantitative insights from Epic and Salesforce data to improve triage precision, streamline communication, and reduce delays in care transitions.",
                            "Collaborated with clinical, therapy, and administrative teams to reduce friction points in discharge planning, improve care coordination, and strengthen safe, repeatable workflows in complex rehabilitation and remote-care settings.",
                            "Applied informatics principles to enhance documentation quality, reinforce interdisciplinary handoffs, and reduce variability in care processes.",
                            "These roles formed the bridge into systems engineering by providing firsthand experience with bottleneck analysis, structured process design, and high-impact workflow improvements."
                        ],
                        "subsections": [
                            {
                                "heading": "Documentation Systems and Triage Optimization",
                                "bullets": [
                                    "Design and maintenance of SmartPhrase and SmartList libraries used by remote nursing and provider teams.",
                                    "Epic- and Salesforce-based data review to refine triage pathways and outreach workflows.",
                                    "Reduction of duplicate documentation and improved clarity for downstream clinicians."
                                ]
                            },
                            {
                                "heading": "Care Coordination and Process Redesign",
                                "bullets": [
                                    "Improved discharge planning workflows in rehabilitation and post-acute settings.",
                                    "Strengthened communication channels between nursing, therapy, physicians, and administrative staff.",
                                    "Standardized handoff structures to reduce error risk during transitions of care."
                                ]
                            },
                            {
                                "heading": "Systems Foundations and Workflow Analysis",
                                "bullets": [
                                    "Bottleneck analysis of high-volume documentation and call workflows.",
                                    "Process mapping and redesign to remove friction and reduce avoidable delays.",
                                    "Use of informatics concepts to align clinical documentation with operational goals."
                                ]
                            }
                        ]
                    },
                    {
                        "id": "emergency_systems",
                        "title": "Emergency Systems, High-Acuity Operations, and Rapid Decision Environments",
                        "date_range": "2008-2017",
                        "overview": [
                            "Developed expertise in rapid problem-solving, system triage, and time-critical decision environments across emergency medicine, trauma centers, and EMS response systems.",
                            "Managed complex, high-acuity workflows requiring real-time prioritization, protocol-driven intervention, and tightly coordinated team operations.",
                            "Strengthened EMR documentation accuracy, protocol adherence, and interdepartmental communication in chaotic environments.",
                            "Led clinical rotations for paramedic students, teaching triage algorithms, documentation standards, and workflow-relevant clinical reasoning.",
                            "This background built the foundation for later systems work, where latency, clarity, and structured processes directly determine outcomes."
                        ],
                        "subsections": [
                            {
                                "heading": "High-Acuity Clinical Systems",
                                "bullets": [
                                    "Real-time prioritization of patients based on acuity and available resources.",
                                    "Protocol-driven interventions in trauma and emergency environments.",
                                    "Cross-team coordination among nursing, physicians, EMS, and ancillary staff."
                                ]
                            },
                            {
                                "heading": "EMR Accuracy and Documentation",
                                "bullets": [
                                    "High-fidelity charting in time-sensitive settings.",
                                    "Protocol adherence and accurate documentation for legal and clinical continuity.",
                                    "Communication workflows designed to function under chaotic conditions."
                                ]
                            },
                            {
                                "heading": "Training and Instruction",
                                "bullets": [
                                    "Education of paramedic students on triage logic and documentation standards.",
                                    "Development of individualized learning plans to improve performance and confidence.",
                                    "Instruction emphasizing workflow-relevant clinical reasoning rather than rote tasks alone."
                                ]
                            }
                        ]
                    }
                ],
                "skills": {
                    "clinical_documentation_systems": [
                        "Utilization review, care coordination, and clinical workflow analysis",
                        "Clinical documentation improvement (CDI) support and smartphrase/smartlist design",
                        "EHR workflow optimization using Epic, Salesforce, Talkdesk, and MS Teams integrations",
                        "Remote triage quality review, audit support, and process standardization"
                    ],
                    "hardware_firmware_systems": [
                        "Embedded automation prototyping using RP2040 microcontrollers and sensor integration",
                        "Firmware development for input handling, state management, and fail-safe logic",
                        "Breadboard and low-voltage circuit prototyping for early-stage product development",
                        "USB HID automation, BLE connectivity, and triggered workstation control behaviors",
                        "Human-computer interface design for safety-critical workstation control systems"
                    ],
                    "web_interface_systems": [
                        "Front-end development using HTML, CSS, and JavaScript for interactive single-page applications",
                        "UI/UX design for EMR-style interfaces, modals, onboarding flows, and user-state management",
                        "Responsive layout troubleshooting across desktop and mobile experiences",
                        "LocalStorage-based session logic for onboarding and user preferences",
                        "Accessibility-conscious interface patterns and content structure"
                    ],
                    "ecommerce_systems": [
                        "Multi-platform ecommerce ecosystem design using Shopify, Printify, Etsy, and Vela",
                        "SEO frameworks, product-variant mapping, and reusable listing templates",
                        "Meta Ads audience targeting, catalog syncing, and cross-platform integration",
                        "Workflow automation using n8n, Docker, and local LLM tools (Ollama, LM Studio)",
                        "Visual asset systems for product photography, mockups, and consistent brand identity"
                    ],
                    "automation_llm_systems": [
                        "Prompt engineering and system design for multi-agent LLM workflows",
                        "JSON-based configuration systems for automated content, code, and UI generation",
                        "Local LLM orchestration for image generation, automation pipelines, and creative iteration",
                        "AI-assisted troubleshooting, documentation, and UX refinement across hardware and software projects"
                    ],
                    "biological_environmental_systems": [
                        "Closed-loop hydroponic and aquaponic system design with feedback-driven nutrient and flow control",
                        "Ecological modeling for self-regulating regenerative agriculture environments",
                        "Experimental systems design focused on resilience and adaptability under real-world constraints",
                        "Research on Bidens alba heat tolerance and Brassica adaptability",
                        "Integration of biological, mechanical, and digital systems into unified experimental platforms"
                    ],
                    "leadership_collaboration": [
                        "Peer mentorship and morale building in distributed and clinical teams",
                        "Contributor to workflow documentation, training resources, and EHR tip sheets",
                        "Interdisciplinary communication across clinical, technical, and creative collaborators",
                        "Recognized for initiative, reliability, and systems-focused technical support"
                    ],
                    "creative_systems_thinking": [
                        "Systems-level problem-solving across biological, digital, and mechanical domains",
                        "Ecosystem modeling and feedback-loop analysis applied to engineering and agriculture",
                        "Human-machine interaction and workflow refinement from a clinical perspective",
                        "Integrating clinical, technical, and creative disciplines to enhance clarity and engagement"
                    ],
                    "visual_media_production": [
                        "Product and lifestyle photography using Sony a7C, macro systems, and manual-focus lenses",
                        "Video capture and editing for educational and promotional content using DaVinci Resolve",
                        "Graphic and layout design using Lightroom, Photoshop, and Canva",
                        "Iterative visual design for ecommerce branding and technical storytelling"
                    ]
                },
                "experience": [
                    {
                        "role": "Remote Triage Nurse",
                        "organization": "Signallamp Health",
                        "location": "Remote",
                        "dates": "Jun 2023 - Present",
                        "bullets": [
                            "Provide remote triage support and care coordination through Epic and Salesforce across multiple clinical practices",
                            "Consistently exceed daily productivity standards, managing 80 to 100 encounters per shift while maintaining accuracy and empathy",
                            "Developed and implemented documentation macros and workflow automations; one alone reduced charting time by roughly one hour per week per clinician across a 30 member team",
                            "Supported peers through training materials, EHR tips, and informal troubleshooting for workflow issues",
                            "Frequently assigned to assist across clinical pools due to adaptability, reliability, and high quality documentation"
                        ]
                    },
                    {
                        "role": "RN Case Manager - Inpatient Rehabilitation",
                        "organization": "Orlando Rehab Hospital (Nobis Health)",
                        "location": "Orlando, FL",
                        "dates": "Oct 2024 - Jun 2025",
                        "bullets": [
                            "Coordinated complex discharge plans and interdisciplinary communication for patients in a post acute rehabilitation setting",
                            "Conducted utilization reviews and facilitated payer communication to ensure timely authorizations and continuity of care",
                            "Collaborated closely with patients and families to develop safe, successful discharge and transition of care plans",
                            "Maintained detailed care plans, discharge summaries, and insurance documentation aligned with clinical and regulatory standards"
                        ]
                    },
                    {
                        "role": "RN Case Manager - Inpatient Rehabilitation",
                        "organization": "Encompass Health",
                        "location": "Orlando, FL",
                        "dates": "Feb 2023 - Oct 2024",
                        "bullets": [
                            "Managed daily caseloads of 15 to 20 medically complex rehab patients, coordinating with physicians, therapists, insurers, and families to ensure safe and successful discharges",
                            "Acted as liaison between patients and payers to secure pre certifications and continued stay approvals",
                            "Streamlined care coordination documentation through improved template use and efficient workflow habits",
                            "Named Employee of the Month in June 2023 for outstanding performance and collaboration"
                        ]
                    },
                    {
                        "role": "IV Infusion Nurse",
                        "organization": "Vitalounge",
                        "location": "Orlando, FL",
                        "dates": "Oct 2022 - Feb 2023",
                        "bullets": [
                            "Administered IV vitamin and hydration infusions in a wellness setting, ensuring safe and comfortable patient experiences",
                            "Monitored for adverse reactions, maintained IV access, and accurately documented services and outcomes",
                            "Built client trust through education, communication, and professionalism"
                        ]
                    },
                    {
                        "role": "Stay at Home Parent / Homeschool Educator",
                        "organization": "Family",
                        "location": "Orlando, FL",
                        "dates": "Dec 2017 - Feb 2023",
                        "bullets": [
                            "Managed full time home education and developmental planning for two children with individualized curriculum design",
                            "Balanced time management, communication, and household operations in a dynamic, high responsibility role",
                            "Created educational materials and documentation systems to track progress and milestones"
                        ]
                    },
                    {
                        "role": "Telephonic RN Case Manager",
                        "organization": "Quantum Health",
                        "location": "Columbus, OH",
                        "dates": "2016 - 2017",
                        "bullets": [
                            "Delivered telephonic case management and benefits education for employer based health plan members",
                            "Collaborated with multidisciplinary teams to coordinate care and ensure compliance with payer policies",
                            "Maintained accurate and timely documentation across multiple systems"
                        ]
                    },
                    {
                        "role": "Travel Nurse - Emergency Department",
                        "organization": "Single Facility Assignment",
                        "location": "Contract",
                        "dates": "2015 - 2017",
                        "bullets": [
                            "Provided emergency and trauma care in a high volume ER under repeated extended contracts",
                            "Actively sought by leadership to renew and extend contracts and repeatedly invited to join as a full time staff nurse",
                            "Recognized for reliability, composure, and efficient decision making in crisis situations"
                        ]
                    },
                    {
                        "role": "Staff Nurse - Emergency Department",
                        "organization": "Nationwide Children's Hospital",
                        "location": "Columbus, OH",
                        "dates": "2012 - 2016",
                        "bullets": [
                            "Delivered comprehensive pediatric emergency care, including triage, stabilization, and family education",
                            "Served as a unit leader often assigned as trauma nurse, intake desk lead, or float to assist high acuity areas",
                            "Trained and supported new staff and paramedic students in clinical procedures",
                            "Commended for teamwork, communication, and consistent documentation quality"
                        ]
                    }
                ],
                "education": [
                    {
                        "degree": "Associate Degree in Nursing (ADN)",
                        "institution": "Chamberlain University",
                        "year": "2012",
                        "certificate_file": "assets/pp_NURSING_ADN.pdf"
                    }
                ],
                "certificates": [
                    {
                        "id": "pp_Python_Programming_For_Everyone",
                        "title": "Programming for Everybody (Python)",
                        "issuer": "University of Michigan / Coursera",
                        "completed": "Oct 2025",
                        "pdf_path": "assets/pp_Python_Programming_For_Everyone.pdf",
                        "verify_url": "https://www.coursera.org/account/accomplishments/verify/YNCNEVGXEJDG"
                    },
                    {
                        "id": "cert_systems_thinking",
                        "title": "Systems Thinking Basics",
                        "issuer": "Coursera / Starweaver Instructor Team",
                        "completed": "Nov 18, 2025",
                        "verify_url": "https://coursera.org/verify/IL7X19XU9VH9",
                        "pdf_path": "assets/pp_Systems_Thinking_Basics.pdf"
                    },
                    {
                        "id": "license_rn_fl",
                        "title": "Registered Nurse - Compact Multistate License",
                        "details": "FL RN9613731, Unencumbered, Expires 07/31/2026",
                        "verify_instructions": "Verification available via Nursys QuickConfirm search portal.",
                        "verify_url": "https://www.nursys.com",
                    }
                ],
                "resume_pdf": "assets/resume/pp_Paul_Peck_Resume_11.20.25.pdf"
            }
        };

        // IntroSequence class with updated boot animation timing
        class IntroSequence {
            constructor() {
                this.bootScreen = document.getElementById('bootScreen');
                this.welcomeModal = document.getElementById('welcomeModal');
                this.skipIntro = localStorage.getItem('skipIntro') === 'true';
            }

            async start() {
                await this.bootAnimation();
                if (this.skipIntro) return;
                this.showWelcome();
            }
    
            async bootAnimation() {
                const STATIC_POP_DELAY = 400; // ms - tweak to 300/500 if needed
                const staticAudio = document.getElementById('bootStaticAudio');
                const beepAudio = document.getElementById('ekgBeepAudio');

                // Conservative volumes
                if (staticAudio) staticAudio.volume = 0.25;
                if (beepAudio) beepAudio.volume = 0.35;

                // Delayed static pop so fade-in completes first
                if (staticAudio) {
                    setTimeout(() => {
                        staticAudio.currentTime = 0;

                        // Trigger visual static pop at the same time
                        if (this.bootScreen) {
                            this.bootScreen.classList.add('static-pop');
                        }

                        staticAudio.play().catch(() => {
                            // Autoplay may be blocked; fail silently
                        });
                    }, STATIC_POP_DELAY);
                }

                // Schedule the EKG beep near the R wave of the heartbeat SVG
                // R wave is roughly mid-path in a 2.2s animation, ~1.4-1.5s feels right.
                if (beepAudio) {
                    setTimeout(() => {
                        beepAudio.currentTime = 0;
                        beepAudio.play().catch(() => {
                            // Autoplay may be blocked; browsers that need a click just won't play it
                        });
                    }, 1500);
                }

                // Hide boot screen after heartbeat + staticPop complete (~2.2s total)
                return new Promise(resolve => {
                    setTimeout(() => {
                        if (this.bootScreen) {
                            this.bootScreen.classList.add('hidden');
                        }
                        resolve();
                    }, 2200);
                });
            }

            showWelcome() {
                if (!this.welcomeModal) return;
                this.welcomeModal.classList.remove('hidden');
                const enterBtn = document.getElementById('enterChartBtn');
                const skipCheckbox = document.getElementById('skipIntroCheckbox');
                if (enterBtn) {
                    enterBtn.addEventListener('click', () => {
                        if (skipCheckbox && skipCheckbox.checked) {
                            localStorage.setItem('skipIntro', 'true');
                        }
                        this.welcomeModal.classList.add('hidden');
                    });
                    enterBtn.focus();
                }
            }
        }

        // Helper function to resolve @resume.* references
        function resolveReference(path) {
            const parts = path.replace('@resume.', '').split('.');
            let value = resumeData.resume;
            for (const part of parts) {
                if (value && value[part] !== undefined) {
                    value = value[part];
                } else {
                    return null;
                }
            }
            return value;
        }

        // Helper function to render plain text as HTML
        function renderPlainTextAsHtml(text) {
            const trimmed = text.trim();
            if (!trimmed) {
                return '<p><em>No blog entry found yet.</em></p>';
            }
            const paragraphs = trimmed.split(/\n\s*\n/);
            return paragraphs.map(p => {
                const withBreaks = p.replace(/\n/g, '<br>');
                return `<p>${withBreaks}</p>`;
            }).join('');
        }

        // Function to load blog post from external file
        function loadBlogPost() {
            const container = document.getElementById('blogTextContainer');
            if (!container) return;
            fetch('assets/blog/current.txt')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Blog file not found');
                    }
                    return response.text();
                })
                .then(text => {
                    container.innerHTML = renderPlainTextAsHtml(text);
                })
                .catch(() => {
                    container.innerHTML = '<p><em>No external blog note found yet. Create assets/blog/current.txt to populate this section.</em></p>';
                });
        }

        // Render Demographics Tab
        function renderDemographics(data) {
            const { name, location, public_email } = data.identity;
            const license = data.resume.certificates.find(c => c.id === 'license_rn_fl');
            
            // Define link order and mapping
            const linkOrder = [
                { key: 'linkedin', label: 'LinkedIn' },
                { key: 'github', label: 'GitHub' },
                { key: 'shop', label: 'E-Commerce Platform' },
                { key: 'studio', label: 'Photography (in progress)' }
            ];
            
            const orderedLinks = linkOrder
                .map(({ key, label }) => {
                    const url = data.identity.links[key];
                    return url && !url.includes('ppeck.me') ? { url, label } : null;
                })
                .filter(link => link !== null);
            
            return `
                <h2>Patient Demographics</h2>
                <div class="info-grid">
                    <div class="info-item">
                        <div class="info-label">Name</div>
                        <div class="info-value">${name}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Location</div>
                        <div class="info-value">${location}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">License</div>
                        <div class="info-value">${license ? license.details : 'N/A'}</div>
                    </div>
                    <div class="info-item">
                        <div class="info-label">Contact</div>
                        <div class="info-value"><a href="mailto:${public_email}">${public_email}</a></div>
                    </div>
                    <div class="info-item professional-summary">
                    <div class="info-label">Professional Summary</div>
                    <div class="info-value">
        Clinical systems &amp; hardware tinkerer bridging bedside chaos and usable tech.<br>
        8+ years with Epic &amp; triage workflows ¬∑ Building EMR-style tools and hardware seat sensors ¬∑ Targeting clinical tech, implementation, and informatics roles.
                    </div>
                </div>

                </div>
                <h3>Professional Links</h3>
                <ul class="links-list">
                    ${orderedLinks.map(link => `<li><a href="${link.url}" target="_blank" rel="noopener">${link.label}</a></li>`).join('')}
                </ul>
            `;
        }

        // Render History Tab - Updated to use new thematic structure
        function renderHistory(data) {
            const { summary, work_experience_sections } = data.resume;

            return `
                <h2>Clinical History</h2>
                <p>${summary}</p>
                <h3>Work Experience</h3>
                ${work_experience_sections.map((section, sectionIndex) => `
                    <div class="experience-item">
                        <div class="collapsible-header" data-target="section-${sectionIndex}">
                            <div class="doc-title">${section.title}</div>
                            <span class="collapsible-icon">‚ñ∂</span>
                        </div>
                        <div class="collapsible-content" id="section-${sectionIndex}">
                            <div class="job-header">
                                <div class="job-title">${section.title}</div>
                                <div class="job-dates">${section.date_range}</div>
                            </div>
                            <div style="margin-bottom: 20px;">
                                ${section.overview.map(para => `<p>${para}</p>`).join('')}
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Meds Tab - Shows Core Clinical & Technical Systems
        function renderMeds(data) {
            const clinicalSkills = resolveReference('@resume.skills.clinical_documentation_systems') || data.resume.skills.clinical_documentation_systems;
            const hardwareSkills = resolveReference('@resume.skills.hardware_firmware_systems') || data.resume.skills.hardware_firmware_systems;
            const webSkills = resolveReference('@resume.skills.web_interface_systems') || data.resume.skills.web_interface_systems;
            const ecommerceSkills = resolveReference('@resume.skills.ecommerce_systems') || data.resume.skills.ecommerce_systems;
            const automationSkills = resolveReference('@resume.skills.automation_llm_systems') || data.resume.skills.automation_llm_systems;
            const bioSkills = resolveReference('@resume.skills.biological_environmental_systems') || data.resume.skills.biological_environmental_systems;

            return `
                <h2>Medications (Core Clinical Systems)</h2>

                <!-- TLDR skills card -->
                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-skills-tldr">
                        <h3>Skills Applied Across All Domains</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-skills-tldr">
                        <h4>Systems and Engineering</h4>
                        <ul>
                            <li>Embedded systems and automation using RP2040-class microcontrollers and sensor input.</li>
                            <li>Fail-safe logic, state management, and hardware‚Äìsoftware interaction for real-world devices.</li>
                        </ul>

                        <h4>Software and Tooling</h4>
                        <ul>
                            <li>Python, REST-style APIs, and JavaScript front ends for EMR-style and dashboard interfaces.</li>
                            <li>Docker, n8n, and local LLM tools for automation, prototyping, and content generation.</li>
                        </ul>

                        <h4>Data and Process Optimization</h4>
                        <ul>
                            <li>Workflow analysis, documentation system design, and triage pathway refinement.</li>
                            <li>Using Epic and Salesforce data to reduce friction and improve care coordination.</li>
                        </ul>

                        <h4>Biological, Environmental, and Creative Systems</h4>
                        <ul>
                            <li>Hydroponic and aquaponic systems used as applied experimentation platforms.</li>
                            <li>Photography, visual design, and ecommerce storytelling to communicate complex systems.</li>
                        </ul>
                    </div>
                </div>

                <!-- Existing detailed skills sections, unchanged in structure -->
                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-clinical">
                        <h3>Clinical Documentation Systems</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-clinical">
                        <ul>${clinicalSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-hardware">
                        <h3>Hardware & Firmware Systems</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-hardware">
                        <ul>${hardwareSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-web">
                        <h3>Web & Interface Systems</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-web">
                        <ul>${webSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-ecommerce">
                        <h3>Ecommerce & Content Systems</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-ecommerce">
                        <ul>${ecommerceSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-automation">
                        <h3>Automation & LLM-Driven Systems</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-automation">
                        <ul>${automationSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="meds-bio">
                        <h3>Biological & Environmental Systems Engineering</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="meds-bio">
                        <ul>${bioSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>
            `;
        }

        // Labs Tab - Shows Collaborative & Creative Competencies
        function renderLabs(data) {
            const leadershipSkills = resolveReference('@resume.skills.leadership_collaboration') || data.resume.skills.leadership_collaboration;
            const creativeSkills = resolveReference('@resume.skills.creative_systems_thinking') || data.resume.skills.creative_systems_thinking;
            const mediaSkills = resolveReference('@resume.skills.visual_media_production') || data.resume.skills.visual_media_production;

            return `
                <h2>Lab Results (Collaborative & Creative Competencies)</h2>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="labs-leadership">
                        <h3>Leadership & Collaboration</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="labs-leadership">
                        <ul>${leadershipSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="labs-creative">
                        <h3>Creative & Systems Thinking</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="labs-creative">
                        <ul>${creativeSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>

                <div class="skills-section">
                    <div class="collapsible-header" data-target="labs-media">
                        <h3>Visual & Media Production Systems</h3>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="labs-media">
                        <ul>${mediaSkills.map(skill => `<li>${skill}</li>`).join('')}</ul>
                    </div>
                </div>
            `;
        }

        // Render Notes Tab - Blog area with external content
        function renderNotes(data) {
            return `
                <h2>Progress Notes (Learning Log)</h2>
                <div class="document-item">
                    <div class="collapsible-header" data-target="blog-note">
                        <div class="doc-title">Current Learning & Work Log</div>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="blog-note">
                        <div class="sticky-note">
                            <p>
                                Right now I am bridging my clinical background with systems thinking and informatics.
                                I am experimenting with documentation tools, automation, and hardware/firmware projects
                                that reduce cognitive load for clinicians while keeping care human and personal.
                            </p>
                        </div>
                        <div id="blogTextContainer" class="blog-body">
                            <p><em>Loading latest note from blog/current.txt‚Ä¶</em></p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Render Documents Tab
        function renderDocuments(data) {
            const { education, certificates, resume_pdf } = data.resume;
            
            return `
                <h2>Documents</h2>
                
                <h3>Resume</h3>
                <div class="document-item">
                    <div class="collapsible-header" data-target="resume-doc">
                        <div class="doc-title">Complete Resume (PDF)</div>
                        <span class="collapsible-icon">‚ñ∂</span>
                    </div>
                    <div class="collapsible-content" id="resume-doc">
                        <div class="doc-meta">Full professional resume in PDF format</div>
                        <div class="doc-actions">
                            <a href="${resume_pdf}" target="_blank" rel="noopener" class="doc-link">Download Resume PDF</a>
                            ${resume_pdf ? `<a href="${resume_pdf}" target="_blank" rel="noopener" class="doc-link">View Resume PDF</a>` : ''}
                        </div>
                    </div>
                </div>
                
                <h3>Education</h3>
                ${education.map((edu, index) => `
                    <div class="document-item">
                        <div class="collapsible-header" data-target="edu-${index}">
                            <div class="doc-title">${edu.degree}</div>
                            <span class="collapsible-icon">‚ñ∂</span>
                        </div>
                        <div class="collapsible-content" id="edu-${index}">
                            <div class="doc-meta">${edu.institution} - ${edu.year}</div>
                            ${edu.certificate_file ? `
                                <div class="doc-actions">
                                    <a href="${edu.certificate_file}" target="_blank" rel="noopener" class="doc-link">View Diploma PDF</a>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `).join('')}
                
                <h3>Certifications & Licenses</h3>
                ${certificates.map((cert, index) => `
                    <div class="document-item">
                        <div class="collapsible-header" data-target="cert-${index}">
                            <div class="doc-title">${cert.title.replace(/‚Äì/g, '-')}</div>
                            <span class="collapsible-icon">‚ñ∂</span>
                        </div>
                        <div class="collapsible-content" id="cert-${index}">
                            <div class="doc-meta">
                                ${cert.issuer ? `${cert.issuer} - ` : ''}
                                ${cert.completed || cert.details || ''}
                            </div>
                            ${cert.verify_instructions ? `<p>${cert.verify_instructions}</p>` : ''}
                            <div class="doc-actions">
                                ${cert.pdf_path ? `<a href="${cert.pdf_path}" target="_blank" rel="noopener" class="doc-link">View Certificate PDF</a>` : ''}
                                ${cert.verify_url ? `<a href="${cert.verify_url}" target="_blank" rel="noopener" class="doc-link">Verify Online</a>` : ''}
                            </div>
                        </div>
                    </div>
                `).join('')}
            `;
        }

        // Initialize the app
        function initApp() {
            // Apply branding colors
            const palette = resumeData.branding.palette;
            document.documentElement.style.setProperty('--accent-primary', palette.accent_primary);
            document.documentElement.style.setProperty('--accent-secondary', palette.accent_secondary);
            document.documentElement.style.setProperty('--bg-dark', palette.background_dark);
            document.documentElement.style.setProperty('--bg-light', palette.background_light);
            document.documentElement.style.setProperty('--text-light', palette.text_light);
            document.documentElement.style.setProperty('--text-dark', palette.text_dark);
            document.documentElement.style.setProperty('--link-color', palette.link_color);

            // Render all tabs
            document.getElementById('tab-demographics').innerHTML = renderDemographics(resumeData);
            document.getElementById('tab-history').innerHTML = renderHistory(resumeData);
            document.getElementById('tab-meds').innerHTML = renderMeds(resumeData);
            document.getElementById('tab-labs').innerHTML = renderLabs(resumeData);
            document.getElementById('tab-notes').innerHTML = renderNotes(resumeData);
            document.getElementById('tab-documents').innerHTML = renderDocuments(resumeData);

            // Hide loading, show first tab
            document.getElementById('loading').style.display = 'none';
            document.getElementById('tab-demographics').classList.add('active');

            // Set up dock links
            const resumeBtn = document.getElementById('resumeBtn');
            if (resumeData.resume.resume_pdf) {
                resumeBtn.href = resumeData.resume.resume_pdf;
            }

            const contactBtn = document.getElementById('contactBtn');
            contactBtn.href = `mailto:${resumeData.identity.public_email}`;
            
            const restartIntroBtn = document.getElementById('restartIntroBtn');
            if (restartIntroBtn) {
                restartIntroBtn.addEventListener('click', () => {
                    // Allow the intro to run again next load
                    localStorage.removeItem('skipIntro');
                    // Reload the page so IntroSequence.start() runs fresh
                    window.location.reload();
                });
            }
            
            // Setup collapsible sections
            setupCollapsibles();
            
            // Load blog post
            loadBlogPost();
        }

        // Collapsible functionality
        function setupCollapsibles() {
            document.addEventListener('click', (e) => {
                const header = e.target.closest('.collapsible-header');
                if (!header) return;
                
                toggleCollapsible(header);
            });
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    const header = e.target.closest('.collapsible-header');
                    if (!header) return;
                    
                    e.preventDefault();
                    toggleCollapsible(header);
                }
            });
            
            // Make headers keyboard accessible
            document.querySelectorAll('.collapsible-header').forEach(header => {
                header.setAttribute('tabindex', '0');
                header.setAttribute('role', 'button');
                header.setAttribute('aria-expanded', 'false');
            });
        }
        
        function toggleCollapsible(header) {
            const targetId = header.dataset.target;
            const content = document.getElementById(targetId);
            
            if (!content) return;
            
            const isExpanded = header.classList.contains('expanded');
            
            // Toggle expanded state
            header.classList.toggle('expanded');
            content.classList.toggle('expanded');
            
            // Update aria-expanded
            header.setAttribute('aria-expanded', !isExpanded);
        }

        // Tab navigation
        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;
                
                // Update tab buttons
                document.querySelectorAll('.nav-tab').forEach(t => {
                    t.classList.remove('active');
                    t.setAttribute('aria-selected', 'false');
                });
                tab.classList.add('active');
                tab.setAttribute('aria-selected', 'true');
                
                // Update content
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(`tab-${targetTab}`).classList.add('active');
            });
        });

        // Keyboard navigation for tabs
        document.querySelectorAll('.nav-tab').forEach((tab, index, tabs) => {
            tab.addEventListener('keydown', (e) => {
                let newIndex = index;
                if (e.key === 'ArrowLeft') {
                    newIndex = index > 0 ? index - 1 : tabs.length - 1;
                    e.preventDefault();
                } else if (e.key === 'ArrowRight') {
                    newIndex = index < tabs.length - 1 ? index + 1 : 0;
                    e.preventDefault();
                }
                if (newIndex !== index) {
                    tabs[newIndex].focus();
                    tabs[newIndex].click();
                }
            });
        });

        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const themeText = document.getElementById('themeText');
        let isDark = false;

        // Check for saved preference or default to light mode
        if (localStorage.getItem('theme') === 'dark') {
            isDark = true;
            document.body.classList.add('dark-theme');
            themeIcon.textContent = '‚òÄÔ∏è';
            themeText.textContent = 'Light';
        }

        themeToggle.addEventListener('click', () => {
            isDark = !isDark;
            document.body.classList.toggle('dark-theme');
            
            if (isDark) {
                themeIcon.textContent = '‚òÄÔ∏è';
                themeText.textContent = 'Light';
                localStorage.setItem('theme', 'dark');
            } else {
                themeIcon.textContent = 'üåô';
                themeText.textContent = 'Dark';
                localStorage.setItem('theme', 'light');
            }
        });

        // Dock scroll behavior
        const dock = document.querySelector('.dock');
        
        window.addEventListener('scroll', () => {
            if (window.scrollY > 80) {
                dock.classList.add('scrolled');
            } else {
                dock.classList.remove('scrolled');
            }
        }, { passive: true });

        // Dock actions
        document.getElementById('homeBtn').addEventListener('click', () => {
            document.querySelector('.nav-tab').click();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Initialize app when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                const introSequence = new IntroSequence();
                initApp();
                introSequence.start();
            });
        } else {
            const introSequence = new IntroSequence();
            initApp();
            introSequence.start();
        }
    </script>
</body>
</html>
